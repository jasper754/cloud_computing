<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitHub Activity Tool</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f5f7fb;
    margin:0;
    padding:20px;
}

.container{
    max-width:800px;
    margin:auto;
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

h1{
    text-align:center;
    color:#4a56e2;
}

.section{
    margin-top:25px;
    padding-top:15px;
    border-top:1px solid #ddd;
}

button{
    background:#4a56e2;
    color:white;
    border:none;
    padding:8px 15px;
    border-radius:5px;
    cursor:pointer;
    margin-top:8px;
}

button:hover{
    background:#3942b8;
}

pre{
    background:#f1f1f1;
    padding:10px;
    border-radius:6px;
    overflow:auto;
}

img{
    max-width:100%;
    margin-top:10px;
    border-radius:8px;
}
</style>

</head>

<body>
<div class="container">
<h1>üöÄ GitHub Activity Tool</h1>

<div class="section" style="border-top:none; margin-top:0;">
<h3>üìÑ Read Public File</h3>
<button onclick="fetchPublic()">Fetch File</button>
<pre id="public-output">Output here...</pre>
</div>

<!-- PRIVATE FILE -->

<div class="section">
<h3>üîê Read Private File</h3>
<button onclick="fetchPrivate()">Fetch File</button>
<pre id="private-output">Output here...</pre>
</div>

<!-- IMAGE -->

<div class="section">
<h3>üñº Fetch Private Image</h3>
<button onclick="fetchImage()">Fetch Image</button>
<div id="image-output"></div>
</div>

<!-- UPLOAD -->

<div class="section">
<h3>‚¨Ü Upload File</h3>
<input type="file" id="fileInput">
<br>
<button onclick="uploadFile()">Upload</button>
</div>

</div>

<script>
const TOKEN = "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";

// ===== PUBLIC FILE =====
async function fetchPublic(){
    const owner="jasper754";
    const repo="cloud-computing";
    const path="67.txt";
    const branch="main";

    const url=`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;

    try{
        const res=await fetch(url);
        const data=await res.json();
        document.getElementById("public-output").textContent=atob(data.content);
    }catch{
        document.getElementById("public-output").textContent="Failed to load.";
    }
}

// ===== PRIVATE FILE =====
async function fetchPrivate(){
    const owner="jasper754";
    const repo="cloud_computing";
    const path="67.txt";
    const branch="main";

    const url=`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;

    try{
        const res=await fetch(url,{
            headers:{
                Authorization:`token ${TOKEN}`,
                Accept:"application/vnd.github.v3+json"
            }
        });

        const data=await res.json();
        document.getElementById("private-output").textContent=atob(data.content);
    }catch{
        document.getElementById("private-output").textContent="Failed to load.";
    }
}

// ===== FETCH IMAGE =====
async function fetchImage(){
    const owner="jasper754";
    const repo="cloud_computing";
    const path="patrick.png";

    const url=`https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

    try{
        const res=await fetch(url,{
            headers:{ Authorization:`token ${TOKEN}` }
        });

        const data=await res.json();

        if(data.content){
            const img=new Image();
            img.src=`data:image/png;base64,${data.content}`;
            const container=document.getElementById("image-output");
            container.innerHTML="";
            container.appendChild(img);
        }
    }catch{
        alert("Failed to fetch image.");
    }
}

// ===== UPLOAD =====
async function uploadFile(){
    const fileInput=document.getElementById("fileInput");

    if(!fileInput.files.length){
        alert("Select file first.");
        return;
    }

    const file=fileInput.files[0];
    const reader=new FileReader();

    reader.onload=async function(e){
        const content=e.target.result.split(',')[1];

        const owner="jasper754";
        const repo="cloud_computing";
        const path=file.name;

        const apiUrl=`https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

        const data={
            message:`Add ${file.name}`,
            content:content
        };

        const res=await fetch(apiUrl,{
            method:"PUT",
            headers:{
                Authorization:`token ${TOKEN}`,
                "Content-Type":"application/json"
            },
            body:JSON.stringify(data)
        });

        const result=await res.json();

        if(res.ok){
            alert("‚úÖ Upload success!");
        }else{
            alert("‚ùå "+result.message);
        }
    };

    reader.readAsDataURL(file);
}
</script>

</body>
</html>
